<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  

  <title>Our composer.json file is wrong</title>
  <meta name="description" content="I’m working for the Adsmurai engineering team sinceJanuary, that’s around 8 months and a half right now. In this time, we’veadvanced a lot in the direction of splitting a big code monolith into differentand isolated services.">
  <meta name="author" content="Andrés Correa Casablanca">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Our composer.json file is wrong">
  <meta name="twitter:description" content="I’m working for the Adsmurai engineering team sinceJanuary, that’s around 8 months and a half right now. In this time, we’veadvanced a lot in the direction of splitting a big code monolith into differentand isolated services.">
  
  <meta name="twitter:creator" content="castarco">
  
  <meta name="twitter:image" content="https://blog.coderspirit.xyz//images/favicons/favicon-194x194.png" />

  <meta property="og:type" content="article">
  <meta property="og:title" content="Our composer.json file is wrong">
  <meta property="og:description" content="I’m working for the Adsmurai engineering team sinceJanuary, that’s around 8 months and a half right now. In this time, we’veadvanced a lot in the direction of splitting a big code monolith into differentand isolated services.">
  <meta property="og:image" content="https://blog.coderspirit.xyz//images/favicons/favicon-194x194.png" />

  <link rel="apple-touch-icon" sizes="57x57" href="/images/favicons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/images/favicons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/images/favicons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/images/favicons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/images/favicons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/images/favicons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/images/favicons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/images/favicons/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-194x194.png" sizes="194x194">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/images/favicons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/images/favicons/manifest.json">
  <link rel="shortcut icon" href="/images/favicons/favicon.ico">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="msapplication-TileImage" content="/images/favicons/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" href="/css/main.css?1544891407249104120">
  <link rel="canonical" href="https://blog.coderspirit.xyz//blog/2017/08/18/our-composer-json-is-wrong/">
  <link rel="alternate" type="application/rss+xml" title="Coder Spirit" href="/feed.xml">
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['¬€','€¬']]}});
  </script>
  <script type="text/javascript" async
          src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
</head>


  <body>
    <span class="mobile btn-mobile-menu">
  <i class="icon icon-list btn-mobile-menu__icon"></i>
  <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
</span>
  
<header class="panel-cover" style="background-image: url(/images/cover.jpg)">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">
        <a href="/" title="link to home of Coder Spirit">
          <img src="/images/profile.png" class="user-image" alt="My Profile Photo">
          <h1 class="panel-cover__title panel-title">Coder Spirit</h1>
        </a>
        <hr class="panel-cover__divider">
        <p class="panel-cover__description">I'm Andrés Correa Casablanca. I work as a software engineer, but I have a scientist in my heart. I love mathematics, algorithms, AI, and machine learning.
</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary">

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="link to Coder Spirit blog" class="blog-button">Blog</a></li>
            </ul>
          </nav>

          <nav class="cover-navigation navigation--social">
            <ul class="navigation">
          
            
              <!-- Twitter -->
              <li class="navigation__item">
                <a href="http://twitter.com/castarco" title="@castarco on Twitter" target="_blank">
                  <i class="icon icon-social-twitter"></i>
                  <span class="label">Twitter</span>
                </a>
              </li>
            

            
              <!-- LinkedIn -->
              <li class="navigation__item">
                <a href="https://www.linkedin.com/in/castarco" title="castarco on LinkedIn" target="_blank">
                  <i class="icon icon-social-linkedin"></i>
                  <span class="label">LinkedIn</span>
                </a>
              </li>
            

            
              <!-- GitHub -->
              <li class="navigation__item">
                <a href="https://www.github.com/castarco" title="castarco on GitHub" target="_blank">
                  <i class="icon icon-social-github"></i>
                  <span class="label">GitHub</span>
                </a>
              </li>
            

            
              <!-- Email -->
              <li class="navigation__item">
                <a href="mailto:castarco@litipk.com" title="Email castarco@litipk.com" target="_blank">
                  <i class="icon icon-mail"></i>
                  <span class="label">Email</span>
                </a>
              </li>
            

            <!-- RSS -->
            <li class="navigation__item">
              <a href="/feed.xml" title="Subscribe" target="_blank">
                <i class="icon icon-rss"></i>
                <span class="label">RSS</span>
              </a>
            </li>
          
            </ul>
          </nav>

        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>


    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <article class="post-container post-container--single">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="18 Aug 2017" class="post-meta__date date">18 Aug 2017</time>
      
      &#8226; <span class="post-meta__tags">on <a href="/tags/#PHP">PHP</a> <a href="/tags/#Adsmurai">Adsmurai</a> <a href="/tags/#Alpine Linux">Alpine Linux</a> <a href="/tags/#Docker">Docker</a> </span>
      
    </div>
    <h1 class="post-title">Our composer.json file is wrong</h1>
  </header>

  <section class="post">
    <p>I’m working for the <a href="http://www.adsmurai.com/">Adsmurai</a> engineering team since
January, that’s around 8 months and a half right now. In this time, we’ve
advanced a lot in the direction of splitting a big code monolith into different
and isolated services.</p>

<p>One tool that helped us a lot to achieve this goal was <a href="https://www.docker.com/">Docker</a>.
We started with <a href="https://hub.docker.com/_/ubuntu/">Ubuntu-based images</a> for our
development environment, that was the case during my first seven months.</p>

<p>But then we wanted to use Docker in our production servers too for reasons that
are not important here: this is not a devops post! And at that point, we
realized that using <a href="https://alpinelinux.org/">Alpine Linux</a> for our base images
could help us to save disk space, among other minor benefits. So we jumped to
<a href="https://hub.docker.com/_/alpine/">Alpine-based images</a>.</p>

<p>And here is where our story really starts. Our applications started to crash…
because there were missing functions and interfaces.</p>

<p><a href="https://getcomposer.org/">Composer</a> didn’t complain about missing extensions,
but it was evident that something that we needed was not there. Our problem was
that Alpine, in order to obtain very little systems, splits its packages
whenever it makes sense, but that’s not the case with Ubuntu nor Debian, nor
other popular Linux distros.</p>

<p>So, because many PHP extensions are pre-packaged in a single bundle for systems
like Debian, Ubuntu, RedHat, Centos… many developers forget to declare some
extensions as dependencies of their packages. Extensions that typically fall
into this category are: <a href="http://php.net/manual/en/book.ctype.php"><code class="highlighter-rouge">ext-ctype</code></a>,
<a href="http://php.net/manual/en/book.fileinfo.php"><code class="highlighter-rouge">ext-fileinfo</code></a>,
<a href="http://php.net/manual/en/book.session.php"><code class="highlighter-rouge">ext-session</code></a>,
<a href="http://php.net/manual/en/book.tokenizer.php"><code class="highlighter-rouge">ext-tokenizer</code></a>…</p>

<p>This problem can be found across the entire <a href="https://packagist.org/">Packagist</a>
packages repository, even if we look into the subset of super-popular packages,
like <a href="http://symfony.com/">Symfony</a> components.</p>

<p>To end this post: my advice is to read the PHP.net documentation when we’re
using special purpose functions  in order to know if they belong to an extension,
and declare such extensions as dependencies on our composer.json files.</p>

<p>Best regards!</p>

  </section>
  <section id="disqus_thread"></section><!-- /#disqus_thread -->
</article>
<script type="text/javascript">
  var disqus_config = function () {
    this.page.url = 'https://blog.coderspirit.xyz/blog/2017/08/18/our-composer-json-is-wrong/';  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = '/blog/2017/08/18/our-composer-json-is-wrong'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  };

  (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//coderspirit.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
   })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


      </div>

      <footer class="footer">
  <span class="footer__copyright">&copy; 2018 Andrés Correa Casablanca. All rights reserved.</span>
</footer>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript" src="/js/main.js?1544891407249104120"></script>


    </div>
  </body>
</html>